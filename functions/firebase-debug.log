[debug] [2025-03-30T09:24:26.541Z] ----------------------------------------------------------------------
[debug] [2025-03-30T09:24:26.544Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\splic\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions --project ibotaniq
[debug] [2025-03-30T09:24:26.544Z] CLI Version:   14.0.1
[debug] [2025-03-30T09:24:26.544Z] Platform:      win32
[debug] [2025-03-30T09:24:26.544Z] Node Version:  v20.11.1
[debug] [2025-03-30T09:24:26.544Z] Time:          Sun Mar 30 2025 11:24:26 GMT+0200 (středoevropský letní čas)
[debug] [2025-03-30T09:24:26.545Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-03-30T09:24:26.690Z] Object "/functions" in "firebase.json" has unknown property: {"additionalProperty":"deploy"}
[debug] [2025-03-30T09:24:26.690Z] Field "/functions" in "firebase.json" is possibly invalid: must be array
[debug] [2025-03-30T09:24:26.691Z] Field "/functions" in "firebase.json" is possibly invalid: must match a schema in anyOf
[debug] [2025-03-30T09:24:26.694Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-03-30T09:24:26.694Z] > authorizing via signed-in user (pavlasplichal@gmail.com)
[debug] [2025-03-30T09:24:26.695Z] [iam] checking project ibotaniq for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-03-30T09:24:26.695Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:26.696Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:26.696Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq:testIamPermissions [none]
[debug] [2025-03-30T09:24:26.697Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq:testIamPermissions x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:26.697Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-03-30T09:24:27.619Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq:testIamPermissions 200
[debug] [2025-03-30T09:24:27.620Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-03-30T09:24:27.620Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:27.620Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:27.620Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/ibotaniq/serviceAccounts/ibotaniq@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-03-30T09:24:27.620Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/ibotaniq/serviceAccounts/ibotaniq@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-03-30T09:24:28.533Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/ibotaniq/serviceAccounts/ibotaniq@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-03-30T09:24:28.533Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/ibotaniq/serviceAccounts/ibotaniq@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'ibotaniq'...
[info] 
[info] i  deploying functions 
[debug] [2025-03-30T09:24:28.536Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:28.536Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:28.536Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq [none]
[debug] [2025-03-30T09:24:28.777Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq 200
[debug] [2025-03-30T09:24:28.777Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq {"projectNumber":"349395673351","projectId":"ibotaniq","lifecycleState":"ACTIVE","name":"iBotaniQ","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-03-15T19:55:18.615791Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-03-30T09:24:28.779Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:28.779Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:28.779Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:28.779Z] Checked if tokens are valid: true, expires at: 1743330013307
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-03-30T09:24:28.780Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:28.780Z] Checked if tokens are valid: true, expires at: 1743330013307
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-03-30T09:24:28.780Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:28.780Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:28.780Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/cloudfunctions.googleapis.com [none]
[debug] [2025-03-30T09:24:28.780Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:28.781Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/runtimeconfig.googleapis.com [none]
[debug] [2025-03-30T09:24:28.781Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:28.782Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/cloudbuild.googleapis.com [none]
[debug] [2025-03-30T09:24:28.782Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/cloudbuild.googleapis.com x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:28.783Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/artifactregistry.googleapis.com [none]
[debug] [2025-03-30T09:24:28.783Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/artifactregistry.googleapis.com x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:29.830Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/runtimeconfig.googleapis.com 200
[debug] [2025-03-30T09:24:29.830Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-03-30T09:24:29.831Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/cloudbuild.googleapis.com 200
[debug] [2025-03-30T09:24:29.831Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-03-30T09:24:29.833Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/artifactregistry.googleapis.com 200
[debug] [2025-03-30T09:24:29.833Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-03-30T09:24:29.841Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/cloudfunctions.googleapis.com 200
[debug] [2025-03-30T09:24:29.841Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-03-30T09:24:29.841Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:29.841Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:29.842Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/ibotaniq/adminSdkConfig [none]
[debug] [2025-03-30T09:24:30.350Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/ibotaniq/adminSdkConfig 200
[debug] [2025-03-30T09:24:30.350Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/ibotaniq/adminSdkConfig {"projectId":"ibotaniq","storageBucket":"ibotaniq.firebasestorage.app"}
[debug] [2025-03-30T09:24:30.350Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:30.350Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:30.350Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs [none]
[debug] [2025-03-30T09:24:30.738Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs 200
[debug] [2025-03-30T09:24:30.738Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs {"configs":[{"name":"projects/ibotaniq/configs/app"},{"name":"projects/ibotaniq/configs/mongodb"}]}
[debug] [2025-03-30T09:24:30.738Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:30.738Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:30.738Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:30.738Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:30.738Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs/app/variables [none]
[debug] [2025-03-30T09:24:30.739Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs/mongodb/variables [none]
[debug] [2025-03-30T09:24:30.981Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs/app/variables 200
[debug] [2025-03-30T09:24:30.981Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs/app/variables {}
[debug] [2025-03-30T09:24:31.096Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs/mongodb/variables 200
[debug] [2025-03-30T09:24:31.097Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs/mongodb/variables {"variables":[{"name":"projects/ibotaniq/configs/mongodb/variables/uri","updateTime":"2025-03-28T10:42:12.966146213Z"}]}
[debug] [2025-03-30T09:24:31.097Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:31.097Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:31.098Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs/mongodb/variables/uri [none]
[debug] [2025-03-30T09:24:31.378Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs/mongodb/variables/uri 200
[debug] [2025-03-30T09:24:31.378Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/ibotaniq/configs/mongodb/variables/uri {"name":"projects/ibotaniq/configs/mongodb/variables/uri","updateTime":"2025-03-28T10:42:12.966146213Z","text":"mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority"}
[debug] [2025-03-30T09:24:31.379Z] Validating nodejs source
[warn] !  functions: Runtime Node.js 18 will be deprecated on 2025-04-30 and will be decommissioned on 2025-10-31, after which you will not be able to deploy without upgrading. Consider upgrading now to avoid disruption. See https://cloud.google.com/functions/docs/runtime-support for full details on the lifecycle policy 
[debug] [2025-03-30T09:24:32.802Z] > [functions] package.json contents: {
  "name": "functions",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "start": "firebase emulators:start",
    "deploy": "firebase deploy --only functions"
  },
  "engines": {
    "node": "18"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "dependencies": {
    "cors": "^2.8.5",
    "dotenv": "^16.4.7",
    "express": "^4.21.2",
    "firebase-admin": "^11.0.1",
    "firebase-functions": "^4.3.0",
    "joi": "^17.13.3",
    "mongoose": "^8.13.0"
  }
}
[debug] [2025-03-30T09:24:32.802Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-03-30T09:24:32.804Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-03-30T09:24:32.809Z] Found firebase-functions binary at 'C:\Users\splic\ukol-iot\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8357

[error] (node:4692) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(Use `node --trace-warnings ...` to show where the warning was created)
(node:4692) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version

[debug] [2025-03-30T09:24:33.630Z] Got response from /__/functions.yaml {"endpoints":{"api":{"timeoutSeconds":60,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":80,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","region":["us-central1"],"labels":{},"httpsTrigger":{},"entryPoint":"api"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] MongoDB connected

[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-03-30T09:24:43.659Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:43.659Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:43.659Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/firebaseextensions.googleapis.com [none]
[debug] [2025-03-30T09:24:43.659Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:44.711Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/firebaseextensions.googleapis.com 200
[debug] [2025-03-30T09:24:44.711Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/firebaseextensions.googleapis.com [omitted]
[info] +  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-03-30T09:24:44.711Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-03-30T09:24:44.712Z] > authorizing via signed-in user (pavlasplichal@gmail.com)
[debug] [2025-03-30T09:24:44.712Z] [iam] checking project ibotaniq for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-03-30T09:24:44.712Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:44.712Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:44.712Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq:testIamPermissions [none]
[debug] [2025-03-30T09:24:44.712Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq:testIamPermissions x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:44.712Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-03-30T09:24:45.547Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq:testIamPermissions 200
[debug] [2025-03-30T09:24:45.548Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-03-30T09:24:45.549Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:45.549Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:45.549Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/ibotaniq/instances pageSize=100&pageToken=
[debug] [2025-03-30T09:24:46.798Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/ibotaniq/instances 200
[debug] [2025-03-30T09:24:46.799Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/ibotaniq/instances {}
[info] i  functions: Loaded environment variables from .env. 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\splic\ukol-iot\functions (42.44 KB) for uploading 
[debug] [2025-03-30T09:24:46.844Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:46.844Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:46.844Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/ibotaniq/locations/-/functions [none]
[debug] [2025-03-30T09:24:47.641Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/ibotaniq/locations/-/functions 200
[debug] [2025-03-30T09:24:47.641Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/ibotaniq/locations/-/functions {}
[debug] [2025-03-30T09:24:47.641Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:47.641Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:47.641Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-03-30T09:24:48.693Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/-/functions 200
[debug] [2025-03-30T09:24:48.693Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/-/functions {"functions":[{"name":"projects/ibotaniq/locations/us-central1/functions/api","buildConfig":{"build":"projects/349395673351/locations/us-central1/builds/503b7edb-5af6-430a-ab54-8faae3cd0bad","runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743324655381018"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743324655381018"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/ibotaniq/serviceAccounts/349395673351-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/ibotaniq/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}","GCLOUD_PROJECT":"ibotaniq","EVENTARC_CLOUD_EVENT_SOURCE":"projects/ibotaniq/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://api-lbnc42etuq-uc.a.run.app","serviceAccountEmail":"349395673351-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00003-raj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-03-30T08:51:57.471903658Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"53809e679998fceae9c6a93bf2273abcadb6fcf2"},"environment":"GEN_2","url":"https://us-central1-ibotaniq.cloudfunctions.net/api","createTime":"2025-03-28T10:18:37.827524970Z","satisfiesPzi":true}]}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-03-30T09:24:48.696Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:48.697Z] Checked if tokens are valid: true, expires at: 1743330013307
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-03-30T09:24:48.697Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:48.697Z] Checked if tokens are valid: true, expires at: 1743330013307
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-03-30T09:24:48.698Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:48.698Z] Checked if tokens are valid: true, expires at: 1743330013307
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-03-30T09:24:48.698Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:48.698Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:48.698Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/run.googleapis.com [none]
[debug] [2025-03-30T09:24:48.698Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/run.googleapis.com x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:48.698Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/eventarc.googleapis.com [none]
[debug] [2025-03-30T09:24:48.698Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/eventarc.googleapis.com x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:48.699Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/pubsub.googleapis.com [none]
[debug] [2025-03-30T09:24:48.699Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/pubsub.googleapis.com x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:48.700Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/storage.googleapis.com [none]
[debug] [2025-03-30T09:24:48.700Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/storage.googleapis.com x-goog-quota-user=projects/ibotaniq
[debug] [2025-03-30T09:24:49.626Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/run.googleapis.com 200
[debug] [2025-03-30T09:24:49.626Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/run.googleapis.com [omitted]
[info] +  functions: required API run.googleapis.com is enabled 
[debug] [2025-03-30T09:24:49.714Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/pubsub.googleapis.com 200
[debug] [2025-03-30T09:24:49.714Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-03-30T09:24:49.728Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/storage.googleapis.com 200
[debug] [2025-03-30T09:24:49.728Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[debug] [2025-03-30T09:24:49.787Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/eventarc.googleapis.com 200
[debug] [2025-03-30T09:24:49.787Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/ibotaniq/services/eventarc.googleapis.com [omitted]
[info] +  functions: required API eventarc.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-03-30T09:24:49.789Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:49.789Z] Checked if tokens are valid: true, expires at: 1743330013307
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-03-30T09:24:49.789Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:49.789Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:49.789Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/349395673351/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-03-30T09:24:49.789Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/349395673351/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-03-30T09:24:50.347Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/349395673351/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-03-30T09:24:50.347Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/349395673351/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-349395673351@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"118401887025608679041"}}
[debug] [2025-03-30T09:24:50.714Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/349395673351/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-03-30T09:24:50.715Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/349395673351/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-349395673351@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"107806887384018536333"}}
[debug] [2025-03-30T09:24:50.718Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:50.718Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:50.718Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq [none]
[debug] [2025-03-30T09:24:51.584Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq 200
[debug] [2025-03-30T09:24:51.584Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/ibotaniq {"projectNumber":"349395673351","projectId":"ibotaniq","lifecycleState":"ACTIVE","name":"iBotaniQ","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-03-15T19:55:18.615791Z"}
[debug] [2025-03-30T09:24:51.585Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:51.585Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:51.585Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/ibotaniq/billingInfo [none]
[debug] [2025-03-30T09:24:52.646Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/ibotaniq/billingInfo 200
[debug] [2025-03-30T09:24:52.646Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/ibotaniq/billingInfo {"name":"projects/ibotaniq/billingInfo","projectId":"ibotaniq","billingAccountName":"billingAccounts/01F2AB-41BBCC-E41816","billingEnabled":true}
[debug] [2025-03-30T09:24:52.647Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:52.647Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:52.647Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-03-30T09:24:53.493Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-03-30T09:24:53.494Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-349395673351.us-central1.cloudfunctions.appspot.com/7c6265c5-4e1f-4721-8343-f6fa339d9a0f.zip?GoogleAccessId=service-349395673351@gcf-admin-robot.iam.gserviceaccount.com&Expires=1743328493&Signature=Y%2BEHwZWI7q7igtARXUDDAU5bSI1YCm6o%2ByFsrFPpjSRO6pF2rvgxFbrmt9U5KPqfMHlT7efuEwBWiphpDZckpfxCTkgf7ysyoilWvY1wJ4uHscrmduz0xYP%2Fe5qWFG15rvQ0SndnM5Qt4xU9ATMTupo3noTY2PCNL1XE9pH%2BeTpLnmdvI%2BOwAWZ3mjjOVgTmz0lCi4%2B0GkDpr%2BEXjZtX0rWi%2FvE6hjA7NoqXxA4EarV5Arm6jWm4HmD43rKxp8obqNHGYcw2uKAmSrJiv0A9DCaQ2kNA9BlXpYDtuMkLM%2F1o%2BYubpWSuzh0YqxAO%2FjwBBmKVU3K4rSDxBKPGgqDhvw%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-349395673351.us-central1.cloudfunctions.appspot.com","object":"7c6265c5-4e1f-4721-8343-f6fa339d9a0f.zip"}}
[debug] [2025-03-30T09:24:53.496Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-349395673351.us-central1.cloudfunctions.appspot.com/7c6265c5-4e1f-4721-8343-f6fa339d9a0f.zip GoogleAccessId=service-349395673351%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1743328493&Signature=Y%2BEHwZWI7q7igtARXUDDAU5bSI1YCm6o%2ByFsrFPpjSRO6pF2rvgxFbrmt9U5KPqfMHlT7efuEwBWiphpDZckpfxCTkgf7ysyoilWvY1wJ4uHscrmduz0xYP%2Fe5qWFG15rvQ0SndnM5Qt4xU9ATMTupo3noTY2PCNL1XE9pH%2BeTpLnmdvI%2BOwAWZ3mjjOVgTmz0lCi4%2B0GkDpr%2BEXjZtX0rWi%2FvE6hjA7NoqXxA4EarV5Arm6jWm4HmD43rKxp8obqNHGYcw2uKAmSrJiv0A9DCaQ2kNA9BlXpYDtuMkLM%2F1o%2BYubpWSuzh0YqxAO%2FjwBBmKVU3K4rSDxBKPGgqDhvw%3D%3D
[debug] [2025-03-30T09:24:53.496Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-349395673351.us-central1.cloudfunctions.appspot.com/7c6265c5-4e1f-4721-8343-f6fa339d9a0f.zip [stream]
[debug] [2025-03-30T09:24:54.131Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-349395673351.us-central1.cloudfunctions.appspot.com/7c6265c5-4e1f-4721-8343-f6fa339d9a0f.zip 200
[debug] [2025-03-30T09:24:54.132Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-349395673351.us-central1.cloudfunctions.appspot.com/7c6265c5-4e1f-4721-8343-f6fa339d9a0f.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function api(us-central1)... 
[debug] [2025-03-30T09:24:54.140Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:54.140Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:54.140Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/functions/api updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CbuildConfig.buildEnvironmentVariables
[debug] [2025-03-30T09:24:54.141Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/functions/api {"name":"projects/ibotaniq/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-uploads-349395673351.us-central1.cloudfunctions.appspot.com","object":"7c6265c5-4e1f-4721-8343-f6fa339d9a0f.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"APP_PORT":"5000","DB_URI":"mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority","FIREBASE_CONFIG":"{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}","GCLOUD_PROJECT":"ibotaniq","EVENTARC_CLOUD_EVENT_SOURCE":"projects/ibotaniq/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":60,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"130a31573ca5d1a62f73de8a3784bbfd24adac02"}}
[debug] [2025-03-30T09:24:55.957Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/functions/api 200
[debug] [2025-03-30T09:24:55.957Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/functions/api {"name":"projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-30T09:24:56.179795679Z","target":"projects/ibotaniq/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-03-30T09:24:55.958Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:55.958Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:55.958Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a [none]
[debug] [2025-03-30T09:24:56.737Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a 200
[debug] [2025-03-30T09:24:56.738Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a {"name":"projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-30T09:24:56.179795679Z","target":"projects/ibotaniq/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/ibotaniq/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743326696119674"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743324655381018"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/ibotaniq/serviceAccounts/349395673351-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/ibotaniq/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"APP_PORT":"5000","DB_URI":"mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority","FIREBASE_CONFIG":"{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}","GCLOUD_PROJECT":"ibotaniq","EVENTARC_CLOUD_EVENT_SOURCE":"projects/ibotaniq/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-lbnc42etuq-uc.a.run.app","serviceAccountEmail":"349395673351-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00003-raj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cloudfunctions","firebase-functions-hash":"130a31573ca5d1a62f73de8a3784bbfd24adac02"},"environment":"GEN_2","url":"https://us-central1-ibotaniq.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Creating build","state":"IN_PROGRESS","resource":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec"},"done":false}
[debug] [2025-03-30T09:24:57.248Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-03-30T09:24:57.249Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:57.249Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:57.250Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a [none]
[debug] [2025-03-30T09:24:58.049Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a 200
[debug] [2025-03-30T09:24:58.049Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a {"name":"projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-30T09:24:56.179795679Z","target":"projects/ibotaniq/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/ibotaniq/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743326696119674"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743324655381018"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/ibotaniq/serviceAccounts/349395673351-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/ibotaniq/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"APP_PORT":"5000","DB_URI":"mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority","FIREBASE_CONFIG":"{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}","GCLOUD_PROJECT":"ibotaniq","EVENTARC_CLOUD_EVENT_SOURCE":"projects/ibotaniq/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-lbnc42etuq-uc.a.run.app","serviceAccountEmail":"349395673351-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00003-raj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cloudfunctions","firebase-functions-hash":"130a31573ca5d1a62f73de8a3784bbfd24adac02"},"environment":"GEN_2","url":"https://us-central1-ibotaniq.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec"},"done":false}
[debug] [2025-03-30T09:24:59.057Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-03-30T09:24:59.057Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:59.057Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:24:59.058Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a [none]
[debug] [2025-03-30T09:24:59.827Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a 200
[debug] [2025-03-30T09:24:59.827Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a {"name":"projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-30T09:24:56.179795679Z","target":"projects/ibotaniq/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/ibotaniq/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743326696119674"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743324655381018"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/ibotaniq/serviceAccounts/349395673351-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/ibotaniq/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"APP_PORT":"5000","DB_URI":"mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority","FIREBASE_CONFIG":"{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}","GCLOUD_PROJECT":"ibotaniq","EVENTARC_CLOUD_EVENT_SOURCE":"projects/ibotaniq/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-lbnc42etuq-uc.a.run.app","serviceAccountEmail":"349395673351-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00003-raj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cloudfunctions","firebase-functions-hash":"130a31573ca5d1a62f73de8a3784bbfd24adac02"},"environment":"GEN_2","url":"https://us-central1-ibotaniq.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec"},"done":false}
[debug] [2025-03-30T09:25:01.831Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-03-30T09:25:01.832Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:01.832Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:01.833Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a [none]
[debug] [2025-03-30T09:25:02.597Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a 200
[debug] [2025-03-30T09:25:02.597Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a {"name":"projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-30T09:24:56.179795679Z","target":"projects/ibotaniq/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/ibotaniq/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743326696119674"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743324655381018"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/ibotaniq/serviceAccounts/349395673351-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/ibotaniq/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"APP_PORT":"5000","DB_URI":"mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority","FIREBASE_CONFIG":"{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}","GCLOUD_PROJECT":"ibotaniq","EVENTARC_CLOUD_EVENT_SOURCE":"projects/ibotaniq/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-lbnc42etuq-uc.a.run.app","serviceAccountEmail":"349395673351-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00003-raj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cloudfunctions","firebase-functions-hash":"130a31573ca5d1a62f73de8a3784bbfd24adac02"},"environment":"GEN_2","url":"https://us-central1-ibotaniq.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec"},"done":false}
[debug] [2025-03-30T09:25:06.601Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-03-30T09:25:06.601Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:06.602Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:06.602Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a [none]
[debug] [2025-03-30T09:25:07.320Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a 200
[debug] [2025-03-30T09:25:07.320Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a {"name":"projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-30T09:24:56.179795679Z","target":"projects/ibotaniq/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/ibotaniq/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743326696119674"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743324655381018"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/ibotaniq/serviceAccounts/349395673351-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/ibotaniq/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"APP_PORT":"5000","DB_URI":"mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority","FIREBASE_CONFIG":"{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}","GCLOUD_PROJECT":"ibotaniq","EVENTARC_CLOUD_EVENT_SOURCE":"projects/ibotaniq/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-lbnc42etuq-uc.a.run.app","serviceAccountEmail":"349395673351-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00003-raj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cloudfunctions","firebase-functions-hash":"130a31573ca5d1a62f73de8a3784bbfd24adac02"},"environment":"GEN_2","url":"https://us-central1-ibotaniq.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec"},"done":false}
[debug] [2025-03-30T09:25:15.327Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-03-30T09:25:15.327Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:15.328Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:15.328Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a [none]
[debug] [2025-03-30T09:25:16.187Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a 200
[debug] [2025-03-30T09:25:16.188Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a {"name":"projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-30T09:24:56.179795679Z","target":"projects/ibotaniq/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/ibotaniq/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743326696119674"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743324655381018"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/ibotaniq/serviceAccounts/349395673351-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/ibotaniq/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"APP_PORT":"5000","DB_URI":"mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority","FIREBASE_CONFIG":"{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}","GCLOUD_PROJECT":"ibotaniq","EVENTARC_CLOUD_EVENT_SOURCE":"projects/ibotaniq/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-lbnc42etuq-uc.a.run.app","serviceAccountEmail":"349395673351-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00003-raj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cloudfunctions","firebase-functions-hash":"130a31573ca5d1a62f73de8a3784bbfd24adac02"},"environment":"GEN_2","url":"https://us-central1-ibotaniq.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec"},"done":false}
[debug] [2025-03-30T09:25:26.195Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-03-30T09:25:26.195Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:26.195Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:26.196Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a [none]
[debug] [2025-03-30T09:25:27.085Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a 200
[debug] [2025-03-30T09:25:27.086Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a {"name":"projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-30T09:24:56.179795679Z","target":"projects/ibotaniq/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/ibotaniq/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743326696119674"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743324655381018"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/ibotaniq/serviceAccounts/349395673351-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/ibotaniq/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"APP_PORT":"5000","DB_URI":"mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority","FIREBASE_CONFIG":"{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}","GCLOUD_PROJECT":"ibotaniq","EVENTARC_CLOUD_EVENT_SOURCE":"projects/ibotaniq/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-lbnc42etuq-uc.a.run.app","serviceAccountEmail":"349395673351-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00003-raj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cloudfunctions","firebase-functions-hash":"130a31573ca5d1a62f73de8a3784bbfd24adac02"},"environment":"GEN_2","url":"https://us-central1-ibotaniq.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/349395673351/locations/us-central1/builds/3479c534-1ba8-41a1-86cb-7066699699ec"},"done":false}
[debug] [2025-03-30T09:25:37.101Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-03-30T09:25:37.101Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:37.102Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:37.102Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a [none]
[debug] [2025-03-30T09:25:37.979Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a 200
[debug] [2025-03-30T09:25:37.979Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a {"name":"projects/ibotaniq/locations/us-central1/operations/operation-1743326695177-6318be064bd41-a6854051-85f70a0a","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-03-30T09:24:56.179795679Z","endTime":"2025-03-30T09:25:31.233779686Z","target":"projects/ibotaniq/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/ibotaniq/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743326696119674"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-349395673351-us-central1","object":"api/function-source.zip","generation":"1743324655381018"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/ibotaniq/serviceAccounts/349395673351-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/ibotaniq/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"APP_PORT":"5000","DB_URI":"mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority","FIREBASE_CONFIG":"{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}","GCLOUD_PROJECT":"ibotaniq","EVENTARC_CLOUD_EVENT_SOURCE":"projects/ibotaniq/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-lbnc42etuq-uc.a.run.app","serviceAccountEmail":"349395673351-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00003-raj","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cloudfunctions","firebase-functions-hash":"130a31573ca5d1a62f73de8a3784bbfd24adac02"},"environment":"GEN_2","url":"https://us-central1-ibotaniq.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE and message: npm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Invalid: lock file's firebase-functions@6.3.2 does not satisfy firebase-functions@4.9.0\nnpm error Missing: @types/express@4.17.3 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-03-30T09_25_17_251Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351."}}
[debug] [2025-03-30T09:25:37.979Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE and message: npm error code EUSAGE
npm error
npm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.
npm error
npm error Invalid: lock file's firebase-functions@6.3.2 does not satisfy firebase-functions@4.9.0
npm error Missing: @types/express@4.17.3 from lock file
npm error
npm error Clean install a project
npm error
npm error Usage:
npm error npm ci
npm error
npm error Options:
npm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]
npm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]
npm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]
npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
npm error [--no-bin-links] [--no-fund] [--dry-run]
npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
npm error [-ws|--workspaces] [--include-workspace-root] [--install-links]
npm error
npm error aliases: clean-install, ic, install-clean, isntall-clean
npm error
npm error Run "npm help ci" for more info
npm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-03-30T09_25_17_251Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351.
[debug] [2025-03-30T09:25:37.983Z] Total Function Deployment time: 43841
[debug] [2025-03-30T09:25:37.983Z] 1 Functions Deployed
[debug] [2025-03-30T09:25:37.983Z] 1 Functions Errored
[debug] [2025-03-30T09:25:37.983Z] 0 Function Deployments Aborted
[debug] [2025-03-30T09:25:37.983Z] Average Function Deployment time: 43841
[info] 
[info] Functions deploy had errors with the following functions:
	api(us-central1)
[debug] [2025-03-30T09:25:38.205Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[debug] [2025-03-30T09:25:38.205Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:38.205Z] Checked if tokens are valid: true, expires at: 1743330013307
[debug] [2025-03-30T09:25:38.205Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-03-30T09:25:39.139Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-03-30T09:25:39.139Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts {"name":"projects/ibotaniq/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-03-28T10:18:46.501773Z","updateTime":"2025-03-30T08:52:04.757046Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"86400s"}}},"sizeBytes":"117946116","vulnerabilityScanningConfig":{"lastEnableTime":"2025-03-28T10:18:38.025759054Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/ibotaniq/gcf-artifacts"}
[debug] [2025-03-30T09:25:39.140Z] Functions deploy failed.
[debug] [2025-03-30T09:25:39.140Z] {
  "endpoint": {
    "id": "api",
    "project": "ibotaniq",
    "region": "us-central1",
    "entryPoint": "api",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "timeoutSeconds": 60,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "APP_PORT": "5000",
      "DB_URI": "mongodb+srv://pavlasplichal:novy22projekt@cluster0.dplz2.mongodb.net/malina?retryWrites=true&w=majority",
      "FIREBASE_CONFIG": "{\"projectId\":\"ibotaniq\",\"storageBucket\":\"ibotaniq.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "ibotaniq",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/ibotaniq/locations/us-central1/services/api"
    },
    "codebase": "default",
    "runServiceId": "api",
    "availableMemoryMb": 256,
    "cpu": 1,
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "130a31573ca5d1a62f73de8a3784bbfd24adac02"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE and message: npm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Invalid: lock file's firebase-functions@6.3.2 does not satisfy firebase-functions@4.9.0\nnpm error Missing: @types/express@4.17.3 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-03-30T09_25_17_251Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351.",
    "original": {
      "code": 3,
      "message": "Build failed with status: FAILURE and message: npm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Invalid: lock file's firebase-functions@6.3.2 does not satisfy firebase-functions@4.9.0\nnpm error Missing: @types/express@4.17.3 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-03-30T09_25_17_251Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/3479c534-1ba8-41a1-86cb-7066699699ec?project=349395673351."
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-03-30T09:25:39.203Z] Error: Failed to update function api in region us-central1
    at C:\Users\splic\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:399:19
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async Fabricator.updateV2Function (C:\Users\splic\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:388:32)
    at async Fabricator.updateEndpoint (C:\Users\splic\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:155:13)
    at async handle (C:\Users\splic\AppData\Roaming\npm\node_modules\firebase-tools\lib\deploy\functions\release\fabricator.js:89:17)
[error] 
[error] Error: There was an error deploying functions
